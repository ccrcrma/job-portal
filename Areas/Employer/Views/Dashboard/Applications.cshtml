@model List<Job>
@{
    ViewBag.Title = "applications";
}

@if(Model.Count() == 0){
    <h3>You don't have any jobs yet</h3>
}
else {
    @foreach (var job in Model)
    {
       <p> 
           <span class="mb-3" style="font-size:1.3rem;">@job.Title : </span> 
           <span>@job.Appliers.Count()</span> 
        </p>
        @if(job.Appliers.Count() != 0){
            <h6>List of applicants for this post</h6>
        <div class="table-responsive mb-3">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Applied On</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Addess</th>
                        <th>Gender</th>
                        <th>Experience</th>
                        <th>Bio</th>
                        <th>Contact</th>
                        <th>Resume</th>
                        <th>Cover Letter</th>
                    </tr>
                </thead>
                <tbody>
                      @foreach(var applier in @job.Appliers)
                      {
                        <tr>
                            <td>
                               <img src="~/@applier.User.Profile.ProfileImagePath" class="img-profile img-profile-small">
                            </td>
                            <td>@applier.AppliedAt.GetHumanFriendlyDate()</td>
                            <td>@applier.User.Name</td>
                            <td>@applier.User.Email</td>
                            <td>@applier.User.Profile.Address</td>
                            <td>@applier.User.Gender</td>
                            <td>@applier.User.Profile.Experience</td>
                            <td>@applier.User.Profile.Bio</td>
                            <td>@applier.User.Profile.Address</td>
                            <td>
                                <a  asp-action="DownloadFile"
                                    asp-controller="File"
                                    asp-area=""
                                    asp-route-fileName="@applier.User.Profile.Resume"
                                    asp-route-originalFileName = "@applier.User.Profile.ResumeOriginalName"
                                    asp-route-documentType ="cv">
                                    <i class="fa fa-download text-success mr-1" aria-hidden="true"></i> 
                                resume</a>
                            </td>
                            <td>
                                <a  asp-action="DownloadFile"
                                    asp-controller="File"
                                    asp-area=""
                                    asp-route-fileName="@applier.User.Profile.CoverLetter"
                                    asp-route-originalFileName = "@applier.User.Profile.CoverLetterOriginalName"
                                    asp-route-documentType ="cover-letter">
                                    <i class="fa fa-download text-success mr-1" aria-hidden="true"></i> cover letter
                                </a>
                            </td>
                        </tr>
                      }
                </tbody>
            </table>
        </div>
        }
    }
}
